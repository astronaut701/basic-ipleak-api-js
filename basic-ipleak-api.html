<!DOCTYPE html>
<meta charset="UTF-8">
<html>
<head>
<title>ipleak.net API example</title>
</head>
<body>

<script type="text/javascript">
/* Grabs user IP address...
(Refer to https://ipleak.net/json for all available keys and values)
  This function grabs JSON data with fetch. */
   async function fetchipv4info(id) {
       try {
            const response = await fetch("https://ipv4.ipleak.net/json", {
                method: 'GET',
            });
            const ipv4info = await response.json();
            return ipv4info[id];
        } catch (error) {
            console.error(error);
        }
    }

    async function fetchipv6info(id) {
       try {
            const response = await fetch("https://ipv6.ipleak.net/json", {
                method: 'GET',
            });
            const ipv6info = await response.json();
            return ipv6info[id];
        } catch (error) {
            console.error(error);
        }
    }
	/* This function takes the JSON data and outputs it as a varable. */
    async function getipaddress() {
        const ipv4info = await fetchipv4info('ip');
        const ipv6info = await fetchipv6info('ip');
        document.getElementById("ipv4address").innerHTML = ("IPV4 -> " + ipv4info);
        document.getElementById("ipv6address").innerHTML = ("IPV6 -> " + ipv6info);
		}
/* And this, makes everything run automatically on load */
window.addEventListener ? 
window.addEventListener("onload",getipaddress(),false) : 
window.attachEvent && window.attachEvent("onload",getipaddress());
</script>

<p>
    <span id="ipv4address"></span>
    <br>
    <span id="ipv6address"></span>
</p>
</body>
