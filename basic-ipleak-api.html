<!DOCTYPE html>
<meta charset="UTF-8">
<html>
<head>
<title>ipleak.net API example</title>
</head>
<body>

<script type="text/javascript">
/* Grabs user IP address...
(Refer to https://ipleak.net/json for all available keys and values)
  These functions grabs JSON data with fetch and adds the result to the text in HTML */

    function fetchipv4info(id) {
        fetch("https://ipv4.ipleak.net/json")
            .then(response => response.json(id))
            .then(data => {
                const ipv4info = data[id]
                document.getElementById("ipv4address").innerHTML = ("IPV4 -> " + data[id]);
            }) 
            .catch(err => {
                console.error(err);
            });
    }

    function fetchipv6info(id) {
        fetch("https://ipv6.ipleak.net/json")
            .then(response => response.json(id))
            .then(data => {
                const ipv6info = data[id]
                document.getElementById("ipv6address").innerHTML = ("IPV6 -> " + data[id]);
            }) 
            .catch(err => {
                console.error(err);
            });
    }

/* And this, makes everything run automatically on load */
window.addEventListener ? 
window.addEventListener("onload",fetchipv4info('ip'),fetchipv6info('ip'),false) : 
window.attachEvent && window.attachEvent("onload");
</script>

<p>
    <span id="ipv4address"></span>
    <br>
    <span id="ipv6address"></span>
</p>
</body>
